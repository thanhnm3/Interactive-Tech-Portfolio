# Test Profile Configuration
spring:
  application:
    name: portfolio-backend-test

  # Database Configuration - Testcontainers will override
  datasource:
    url: jdbc:postgresql://localhost:5432/test
    username: test
    password: test
    driver-class-name: org.postgresql.Driver
    hikari:
      pool-name: PortfolioTestHikariPool
      minimum-idle: 1
      maximum-pool-size: 5
      connection-timeout: 60000
      idle-timeout: 300000
      max-lifetime: 1200000
      leak-detection-threshold: 60000
      initialization-fail-timeout: 60000

  # JPA/Hibernate Configuration
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: false
    properties:
      hibernate:
        format_sql: false
        dialect: org.hibernate.dialect.PostgreSQLDialect

  # Disable Flyway in tests
  flyway:
    enabled: false

  # Redis Configuration - Mock in tests
  data:
    redis:
      host: localhost
      port: 6379
      timeout: 1000ms

  # RabbitMQ Configuration - Mock in tests
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest

  # Cache Configuration
  cache:
    type: simple

# Logging Configuration
logging:
  level:
    root: WARN
    com.portfolio: INFO
    org.springframework: WARN
    org.hibernate: WARN

# Application Configuration
app:
  cors:
    allowed-origins: http://localhost:3000
  environment:
    name: test
    suffix: "[TEST]"
    header-class: test
  performance:
    enabled: false
    slow-query-threshold-ms: 1000
